<!--
                          ,
   ,-.       _,---._ __  / \
  /  )    .-'       `./ /   \
 (  (   ,'            `/    /|
  \  `-"             \'\   / |
   `.              ,  \ \ /  |
    /`           ,'-`----Y   |
   (            ;        |   '
   |  ,-.    ,-'         |  /
   |  | (   |            | /
   )  |  \  `.___________|/
   `--'   `--'

Isthay isyay ouyay. Ouyay areyay ayay eakysnay ittlelay atcay eekingpay intoyay ethay ebsiteway ourcesay. rethay areyay onay eatstray insideyay ethay ebsiteway ourcesay, otnay evenyay ayay inglesay internetyay ookiecay!! Ouyay areyay ayay ittlelay isappointedday omfray ethay acklay ofyay eatstray, utbay ouyay areyay illstay atisfiedsay incesay ouyay ereway ableyay otay asteway omesay imetay eadingray isthay, enwhay ouyay ouldshay avehay eenbay ayingpay attentionyay otay ouryay eachertay.

-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="icon"
      href="https://pbs.twimg.com/profile_images/1109279524636614656/At7h0SJu_400x400.jpg"
    />
    <title>Schedulology</title>
    <link rel="canonical" href="https://salesianschedule.glitch.me" />
    <meta name="description" content="See the bell schedule in realtime" />
    <meta name="robots" content="index,follow" />
    <meta property="og:title" content="Schedulology" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://salesianschedule.glitch.me" />
    <meta
      property="og:description"
      content="See the bell schedule in realtime"
    />
    <meta
      property="og:image"
      content="https://pbs.twimg.com/profile_images/1109279524636614656/At7h0SJu_400x400.jpg"
    />
    <meta name="twitter:card" content="summary" />
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body id="mainbody">
    <button
      id="schedulecalculate"
      type="button"
      style="position: absolute;width: 90%;height: 20%;top: 5%;left: 5%;transform: translate(0%, 0%);font-family:Verdana;font-size:9.3vmin;background:#EDDAB8;color:#000000;"
      onclick="showdetailed()"
    >
      Schedule Summary
    </button>
    <button
      id="schedulefulllist"
      type="button"
      style="position: absolute;width: 90%;height: 70%;top: 25%;left: 5%;transform: translate(0%, 0%);font-family:Verdana;font-size:3.75vmin;background:#EDDAB8;color:#000000;"
      onclick="showsummary()"
    >
      List
    </button>
    <a href="https://salesianschedule.glitch.me/" target="_blank">
    <button
      id="magnifybutton"
      type="button"
      hidden="true";
      style="position: absolute;width: 12vmin;height: 12vmin;top: 25%;left: 1%;transform: translate(0%, 0%);font-family:Verdana;font-size:3.75vmin;background:#EDDAB8;color:#FF0000;"
    >
      <img src="https://cdn.glitch.me/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0%2Fmagnifying.png?v=1638913374253" style="top: 0%;left: 0%;transform: translate(0%, 0%);position: absolute;width: 100%;height: 100%">
    </button>
    </a>
    <a href="https://www.salesian.com/calendars" target="_blank">
    <button
      id="calendarbutton"
      type="button"
      style="position: absolute;width: 8vmin;height: 8vmin;top: 25%;left: 5%;transform: translate(0%, 0%);font-family:Verdana;font-size:3.75vmin;background:#EDDAB8;color:#FF0000;"
    >
      <img src="https://cdn.glitch.me/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0%2Fglobe.png?v=1639152822663" style="top: 0%;left: 0%;transform: translate(0%, 0%);position: absolute;width: 100%;height: 100%">
    </button>
    </a>
    <button
      id="viewsheetbutton"
      type="button"
      style="position: absolute;width: 8vmin;height: 8vmin;top: 25%;right: 5%;transform: translate(0%, 0%);font-family:Verdana;font-size:3.75vmin;background:#EDDAB8;color:#FF0000;"
      onclick="expanddoc()"
    >
      <img src="https://cdn.glitch.me/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0%2Fcalenda.png?v=1638915120877" type="button" onclick="expanddoc()" style="top: 0%;left: 0%;transform: translate(0%, 0%);position: absolute;width: 100%;height: 100%">
    </button>
    <button
      id="schedsheet"
      type="button"
      style="position: absolute;width: 90%;height: 70%;top: 25%;left: 5%;transform: translate(0%, 0%);background:#252525"
      onclick="closedoc()"
      hidden="true"
    >
    <img
      src="https://cdn.glitch.me/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0/defaultschedule.jpg?v=1641242952935"
      style="position: absolute;height: 100%;width:100%;left:0;top:0;transform: translate(0%, 0%);object-fit: contain;"
      onclick="closedoc()"
    >
    </button>
    <img id="sccornergraphic" hidden="true" style="position: absolute;width: 20vmin;height: 20vmin;bottom: 5%;right: 5%;transform: translate(0%, 0%);font-family:Verdana;font-size:3.75vmin;">
    <button
      id="schedsetting"
      hidden="true"
      style="position: absolute;width: 90%;height: 20%;top: 5%;left: 5%;transform: translate(0%, 0%);background:#252525"
      onclick="closedoc()"
    ></button>
    <button
      id="3amcatvideoholder"
      type="button"
      style="position: absolute;width: 50%;height: 30%;top: 20%;left: 0%;transform: translate(50%, 50%);background:#00CCCC"
      onclick="catvideoplay()"
      hidden="true"
    >
      care for a cat video? click me!!
    <video id="3amcatvideo" loop hidden style="position: absolute;width: 100%;height: 100%;top: 50%;left: 50%;transform: translate(-50%, -50%);">
      <source src="" type="video/mp4">
      Your browser does not support HTML5 video.
    </video>
    </button>
    <div id="creditman" class="credits" style="position: absolute;top: -10px;left: 5px;transform: translate(0%, 0%);">
      <p id="first">
        created by <strong>C.J.F.</strong> '22
      </p>
      <p id="second" hidden="true">
        Salesian College Preparatory
      </p>
    </div>
    <a href="https://salesianschedule.glitch.me">
      <p id="betaman" hidden="true" class="credits" style="width:120px;background:#FF8330;position: absolute;top: -10px;right:5px;transform: translate(0%, 0%);z-index: 1;border-radius: 3px;border: 2px solid black;">
          <strong>TESTbuild</strong>
      </p>
    </a>
    <script>
      function makeHttpObject() {
        try {return new XMLHttpRequest();}
        catch (error) {}
        try {return new ActiveXObject("Msxml2.XMLHTTP");}
        catch (error) {}
        try {return new ActiveXObject("Microsoft.XMLHTTP");}
        catch (error) {}

        throw new Error("Could not create HTTP request object.");
      }
      
      var sccalcbut = document.getElementById("schedulecalculate");
      var sclister = document.getElementById("schedulefulllist");
      var sccornergraphic = document.getElementById("sccornergraphic");
      var magnifybutton = document.getElementById("magnifybutton");
      var calendarbutton = document.getElementById("calendarbutton");
      var viewsheetbutton = document.getElementById("viewsheetbutton");
      var schedsheet = document.getElementById("schedsheet");
      var creditman = document.getElementById("creditman");
      var minimode = false;
      var lastcheck = new Date().getHours() * 60 * 60 + new Date().getMinutes() * 60;
      var lastday = new Date().getTime();
      var activeversion = "";
      var request = makeHttpObject();
          request.open("GET", "https://salesianschedule.glitch.me/autoversion", true);
          request.send(null);
          request.onreadystatechange = function() {
            if (request.readyState == 4){
              activeversion = request.responseText
            }
          };
      var catvideo = document.getElementById("3amcatvideo");
      var catvideoframe = document.getElementById("3amcatvideoholder");
      function catvideoplay() {
        if (catvideo.hidden != "") {
          catvideo.hidden = "";
          catvideo.src = "https://files.catbox.moe/vc99dt.mp4";
          catvideo.play();
          catvideoframe.style = "position: absolute;width: 90%;height: 70%;top: 25%;left: 5%;transform: translate(0%, 0%);background:#000000";
          catvideoframe.style.height = schedsheet.style.height;
          catvideoframe.style.width = schedsheet.style.width;
          catvideoframe.style.top = schedsheet.style.top;
          catvideoframe.style.left = schedsheet.style.left;
        }
      }
      if(new Date().getHours() == 3){
        catvideoframe.hidden = "";
      }
      if (window.location !== window.parent.location){
        sccalcbut.style = "position: absolute;width: 98%;height: 24%;top: 1%;left: 1%;transform: translate(0%, 0%);font-family:Verdana;font-size:10vmin;background:#EDDAB8;color:#000000;";
        sclister.style = "position: absolute;width: 98%;height: 74%;top: 25%;left: 1%;transform: translate(0%, 0%);font-family:Verdana;font-size:3.75vmin;background:#EDDAB8;color:#000000;";
        magnifybutton.hidden = false;
        calendarbutton.hidden = true;
        viewsheetbutton.style = "position: absolute;width: 12vmin;height: 12vmin;top: 25%;right: 1%;transform: translate(0%, 0%);font-family:Verdana;font-size:3.75vmin;background:#EDDAB8;color:#FF0000;";
        sccornergraphic.style="position: absolute;width: 20vmin;height: 20vmin;bottom: 1%;right: 1%;transform: translate(0%, 0%);font-family:Verdana;font-size:3.75vmin;";
        schedsheet.style="position: absolute;width: 98%;height: 74%;top: 25%;left: 1%;transform: translate(0%, 0%);background:#252525";
      }
        let atest = document.createElement('audio');
        let supportsAAC =  !!(atest.canPlayType && atest.canPlayType('audio/mp4; codecs="mp4a.40.2"').replace(/no/, ''));
        let is_iphone = ['iPhone Simulator','iPhone'].includes(navigator.platform)
      if (is_iphone && !supportsAAC){
        sccalcbut.style = "position: absolute;width: 98%;height: 98%;top: 1%;left: 1%;transform: translate(0%, 0%);font-family:Verdana;font-size:20vmin;background:#EDDAB8;";
        sclister.style = "position: absolute;width: 98%;height: 200%;top: 1%;left: 1%;transform: translate(0%, 0%);font-family:Verdana;font-size:3.5vmin;background:#EDDAB8;";
        magnifybutton.hidden = true;
        calendarbutton.hidden = true;
        viewsheetbutton.style="position: absolute;width: 15vmin;height: 15vmin;top: 1%;right: 1%;transform: translate(0%, 0%);font-family:Verdana;font-size:3.75vmin;background:#EDDAB8;color:#FF0000;"
        schedsheet.style="position: absolute;width: 100%;height: 120%;top: 0%;left: 0%;transform: translate(0%, 0%);background:#252525";
        sccornergraphic.hidden = true;
        sclister.hidden = true;
        creditman.hidden = true;
        minimode = true;
      }
      function showsummary(){
        if (minimode == true){
          sccalcbut.hidden = false;
          sclister.hidden = true;
        }
      }
      var specialopenclicks = 0;
      function showdetailed(){
        specialopenclicks = specialopenclicks + 1;
        if (minimode == true){
          sccalcbut.hidden = true;
          sclister.hidden = false;
        }
      }
      function expanddoc(){
        schedsheet.hidden = false;
        specialopenclicks = 0;
      }
      function closedoc(){
        schedsheet.hidden = true;
        if(specialopenclicks==3){
          document.getElementById("mainbody").style.background = document.getElementById("betaman").style.background;
          window.location.replace("https://salesianschedule.glitch.me/beta.html");
        }
        if(specialopenclicks==9){
          catvideoframe.hidden = "";
          catvideoplay();
        }
      }
      
      // "0000|b|Wednesday Faith Families|a|31500|b|36540|b|Block 4|b|0|a|36540|b|37980|b|Break|b|1|a|38280|b|43080|b|Block 2|b|0|a|43080|b|45780|b|Faith Family Meetings|b|0|a|45780|b|48300|b|Lunch|b|1|a|48300|b|53400|b|Block 6|b|0",
      // "0000|b|Wednesday (Extended Lunch)|a|31500|b|36540|b|Block 4|b|0|a|36540|b|37980|b|Break|b|1|a|38280|b|43080|b|Block 2|b|0|a|43080|b|48300|b|Extended Lunch|b|1|a|48600|b|53400|b|Block 6|b|0",
      // "0000|b|Wednesday Early Dismissal|a|31500|b|36540|b|Block 4|b|0|a|36540|b|37980|b|Break|b|1|a|38280|b|43080|b|Block 2|b|0|a|43080|b|45300|b|Lunch|b|1|a|45600|b|50400|b|Block 6|b|0",
      // "0000|b|Holiday|a|0|b|0|b|noclass|b|0",
      // "0000|b|Wednesday (Art Day)|b|cdn.glitch.me/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0%2Fmoreart.png?v=1635364316510|b|cdn.glitch.me/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0%2Fcrayons.png?v=1634689066035|b|!full!cdn.glitch.me/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0%2Fanotherart.png?v=1635363993209|a|31500|b|36540|b|Block 4|b|0|a|36540|b|37980|b|Break|b|1|a|38280|b|43080|b|Block 2|b|0|a|43080|b|44700|b|Lunch|b|0|a|44700|b|46800|b|Art Day (S1)|b|0|a|46800|b|48300|b|Art Day (S2)|b|0|a|48300|b|48300|b|End of Lunch|b|1|a|48600|b|53400|b|Block 6|b|0",
      // "3110|b|Halloween|b|cdn.glitch.me/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0%2Fspooker.png?v=1635489813683|b|cdn.glitch.me/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0%2Fspookaba.jpg?v=1635489808887|b|cdn.glitch.me/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0%2Fspooka.jpg?v=1635489811462|b|F06402|a|0|b|0|b|noclass|b|0",
      // "0000|b|Early Start Wednesday|a|28800|b|33840|b|Block 4|b|0|a|33840|b|35280|b|Break|b|1|a|35580|b|40380|b|Block 2|b|0|a|40380|b|42480|b|Lunch|b|1|a|42780|b|47580|b|Block 6|b|0",
      
      // title|b|background|b|simple|b|detail!corner!icon|b|hexcolor
      // exclude HTTP from links
      // !full! anywhere to use full image stretch
      
      var specialschedules = [
        "2701|b|Thursday [PLAYGROUND] (Athletic wear, sports jerseys, sweatpants)|b|cdn.glitch.global/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0/backgroun.png?v=1643058150581|b|!full!cdn.glitch.global/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0/happytop.png?v=1643198846428|b|!full!cdn.glitch.global/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0/sheet.png?v=1643199976535!corner!cdn.glitch.global/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0/boscoguy.png?v=1643150838642|a|28800|b|33840|b|Block 5|b|0|a|33840|b|35280|b|Break|b|1|a|35580|b|40380|b|Block 1|b|0|a|40380|b|42480|b|Lunch|b|1|a|42780|b|47580|b|Block 3|b|0|a|47580|b|48300|b|Mini-Break|b|0|a|48600|b|53400|b|Block 7|b|0",
        "2801|b|Friday Bosco Day [FREE DRESS] (with freedress guidelines)|b|cdn.glitch.global/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0/backgroun.png?v=1643058150581|b|!full!cdn.glitch.global/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0/happytop.png?v=1643198846428|b|!full!cdn.glitch.global/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0/sheet.png?v=1643199976535!corner!cdn.glitch.global/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0/boscoguy.png?v=1643150838642|a|31500|b|32400|b|Meet Block 6|b|0|a|32400|b|45000|b|Bosco Day!|b|0",
        "3101|b|Monday Mass|a|28800|b|31140|b|Block 1|b|0|a|31380|b|33480|b|Block 2|b|0|a|33720|b|35820|b|Block 3|b|0|a|35820|b|37200|b|Break|b|1|a|37500|b|39600|b|Block 4|b|0|a|39840|b|41940|b|Block 5|b|0|a|42300|b|46500|b|Mass (@Boys & Girls Club)|b|0|a|46500|b|48600|b|Lunch|b|1|a|48900|b|51000|b|Block 6|b|0|a|51300|b|53400|b|Block 7|b|0",
        "0202|b|Early Start Wednesday|a|28800|b|33840|b|Block 4|b|0|a|33840|b|35280|b|Break|b|1|a|35580|b|40380|b|Block 2|b|0|a|40380|b|42480|b|Lunch|b|1|a|42780|b|47580|b|Block 6|b|0",
        "0203|b|Ash Wednesday|a|31500|b|36540|b|Block 4|b|0|a|36540|b|37980|b|Break|b|1|a|38280|b|43080|b|Block 2|b|0|a|43080|b|45780|b|Mass|b|0|a|45780|b|48300|b|Lunch|b|1|a|48300|b|53400|b|Block 6|b|0",
        "1402|b|Monday Schedule|b|static.vecteezy.com/system/resources/previews/001/893/870/original/valentine-s-day-red-hearts-background-free-vector.png!full!|b|cdn.glitch.global/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0/7887947f-fc64-46fb-b7ac-6f2f20ae3f78.image.png?v=1644856994629|b|cdn.glitch.global/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0/ac19611c-c643-4bf9-abd2-ea99f0f4339e.image.png?v=1644857220338|b|A00083|a|28800|b|31740|b|Block 1|b|0|a|31980|b|34680|b|Block 2|b|0|a|34920|b|37620|b|Block 3|b|0|a|37620|b|39120|b|Break|b|1|a|39420|b|42120|b|Block 4|b|0|a|42360|b|45060|b|Block 5|b|0|a|45060|b|47340|b|Lunch|b|1|a|47640|b|50340|b|Block 6|b|0|a|50580|b|53280|b|Block 7|b|0",
        "1602|b|Wednesday Early Dismissal|a|31500|b|36540|b|Block 4|b|0|a|36540|b|37980|b|Break|b|1|a|38280|b|43080|b|Block 2|b|0|a|43080|b|45300|b|Lunch|b|1|a|45600|b|50400|b|Block 6|b|0",
        "1802|b|Bishop Holiday|a|0|b|0|b|noclass|b|0",
        "2102|b|Presidents Day Holiday|a|0|b|0|b|noclass|b|0",
        "0104|b|apil fools|a|0|b|0|b|noclass|b|0",
        "2202|b|2's day Schedule|a|28800|b|31740|b|Block 3|b|0|a|31980|b|34680|b|Block 2|b|0|a|34920|b|37620|b|Block 4|b|0|a|37620|b|39120|b|Break|b|1|a|39420|b|42120|b|Block 5|b|0|a|42360|b|45060|b|Block 6|b|0|a|45060|b|47340|b|Lunch|b|1|a|47640|b|50340|b|Block 1|b|0|a|50580|b|53280|b|Block 7|b|0",
        "2302|b|Wednesday African American Heritage Celebration|b|cdn.glitch.global/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0/0c6c3a15-cdf1-41d4-bd7d-06f99a33a670.image.png?v=1645635010171|b||b|!corner!cdn.glitch.global/187d2ee4-535a-4ad4-a4f5-0e7eedadafb0/d6440bb2-7740-41ab-b324-9ea9319a8ed5.image.png?v=1645635150964|a|31500|b|36540|b|Block 4|b|0|a|36540|b|37980|b|Break|b|1|a|38280|b|43080|b|Block 2|b|0|a|43080|b|45780|b|AA Heritage Celebration|b|0|a|45780|b|48300|b|Lunch|b|1|a|48300|b|53400|b|Block 6|b|0",
        "0503|b|UCBerkley PiE Event <a href='https://salesianschedule.glitch.me/pie.html'><button style='background:#AAFFFF;'>PRESS</button></a>|a|0|b|0|b|noclass|b|0",
      ];
      var weekdayschedules = [
        "0000|b|Sunday Weekend|a|0|b|0|b|noclass|b|0",
        "0000|b|Monday Schedule|a|28800|b|31740|b|Block 1|b|0|a|31980|b|34680|b|Block 2|b|0|a|34920|b|37620|b|Block 3|b|0|a|37620|b|39120|b|Break|b|1|a|39420|b|42120|b|Block 4|b|0|a|42360|b|45060|b|Block 5|b|0|a|45060|b|47340|b|Lunch|b|1|a|47640|b|50340|b|Block 6|b|0|a|50580|b|53280|b|Block 7|b|0",
        "0000|b|Tuesday Schedule|a|28800|b|31740|b|Block 3|b|0|a|31980|b|34680|b|Block 2|b|0|a|34920|b|37620|b|Block 4|b|0|a|37620|b|39120|b|Break|b|1|a|39420|b|42120|b|Block 5|b|0|a|42360|b|45060|b|Block 6|b|0|a|45060|b|47340|b|Lunch|b|1|a|47640|b|50340|b|Block 1|b|0|a|50580|b|53280|b|Block 7|b|0",
        "0000|b|Wednesday Schedule|a|31500|b|36540|b|Block 4|b|0|a|36540|b|37980|b|Break|b|1|a|38280|b|43080|b|Block 2|b|0|a|43080|b|45300|b|Lunch|b|1|a|45600|b|50400|b|Block 6|b|0|a|50700|b|53400|b|Community Time|b|0",
        "0000|b|Thursday Schedule|a|28800|b|33840|b|Block 5|b|0|a|33840|b|35280|b|Break|b|1|a|35580|b|40380|b|Block 1|b|0|a|40380|b|42480|b|Lunch|b|1|a|42780|b|47580|b|Block 3|b|0|a|47580|b|48300|b|Mini-Break|b|0|a|48600|b|53400|b|Block 7|b|0",
        "0000|b|Friday Schedule|a|28800|b|31740|b|Block 6|b|0|a|31980|b|34680|b|Block 2|b|0|a|34920|b|37620|b|Block 1|b|0|a|37620|b|39120|b|Break|b|1|a|39420|b|42120|b|Block 3|b|0|a|42360|b|45060|b|Block 4|b|0|a|45060|b|47340|b|Lunch|b|1|a|47640|b|50340|b|Block 5|b|0|a|50580|b|53280|b|Block 7|b|0",
        "0000|b|Saturday Weekend|a|0|b|0|b|noclass|b|0",
      ];

      var selectedschedule = "";
      for (i = 0; i < specialschedules.length; i++) {
        if (
          parseInt(new Date().getMonth()) ==
            parseInt(specialschedules[i].substring(2, 4)) - 1 &&
          parseInt(new Date().getDate()) ==
            parseInt(specialschedules[i].substring(0, 2))
        ) {
          selectedschedule = specialschedules[i];
        }
      }

      if (selectedschedule == "") {
        selectedschedule = weekdayschedules[parseInt(new Date().getDay())];
      }
      if (window.location == "https://salesianschedule.glitch.me/beta.html" || window.location == "http://salesianschedule.glitch.me/beta.html"){
        document.getElementById("betaman").hidden = "";
        //document.getElementById("mainbody").style.background = document.getElementById("betaman").style.background;
      }
      

      // the first set contains schedule basics: [day-of-schedule, event-name]
      // the remaining sets are the periods: [start-time, end-time, period-name, is-transition]
      function encode(sched) {
        var ms = "";
        ms = sched[0][0] + "|b|" + sched[0][1];
        for (i = 1; i < sched.length; i++) {
          ms =
            ms +
            "|a|" +
            sched[i][0] +
            "|b|" +
            sched[i][1] +
            "|b|" +
            sched[i][2] +
            "|b|" +
            sched[i][3];
        }
        return ms;
      }
      function decode(sched) {
        var msg = sched.split("|a|");
        var ms = [];
        for (i = 0; i < msg.length; i++) {
          ms[i] = msg[i].split("|b|");
        }
        ms.splice(1, 0, [ms[1][0] - 600, ms[1][0], "Entrance Bell", 1]);
        ms.splice(ms.length, 0, [
          ms[ms.length - 1][1],
          ms[ms.length - 1][1] - -600,
          "Dismissal",
          0
        ]);
        return ms;
      }
      
      var schedule = decode(selectedschedule);
      if(schedule[0][2] !== undefined){
        if (schedule[0][2].includes('!full!')){
          document.getElementById("mainbody").style.backgroundSize = '100%';
        }
        document.getElementById("mainbody").style.backgroundImage = 'url(https://'+schedule[0][2].replace('!full!','')+')';
        //document.getElementById("mainbody").style.background = "#000000";
      }
      if(schedule[0][3] !== undefined){
        if (schedule[0][3].includes('!full!')){
          sccalcbut.style.backgroundSize = '100% 100%';
        }
        sccalcbut.style.backgroundImage = 'url(https://'+schedule[0][3].replace('!full!','')+')';
      }
      if(schedule[0][4] !== undefined){
        var theba = schedule[0][4];
        if (schedule[0][4].includes('!full!')){
          sclister.style.backgroundSize = '100% 100%';
        }
        if (schedule[0][4].includes('!corner!')){
          sclister.style.backgroundSize = '100% 100%';
          var sp = theba.split('!corner!');
          theba = sp[0];
          sccornergraphic.src = 'https://'+sp[1];
          sccornergraphic.hidden = '';
        }
        sclister.style.backgroundImage = 'url(https://'+theba.replace('!full!','')+')';
      }
      if(schedule[0][5] !== undefined){
        sccalcbut.style.color = '#'+schedule[0][5];
        sclister.style.color = '#'+schedule[0][5];
        calendarbutton.style.background = '#'+schedule[0][5];
        magnifybutton.style.background = '#'+schedule[0][5];
        viewsheetbutton.style.background = '#'+schedule[0][5];
      }
      var thefuture = false;

      function calcSchedule() {
        var currenttime =
          new Date().getHours() * 60 * 60 + new Date().getMinutes() * 60;
        var exacttime =
          new Date().getHours() * 60 * 60 +
          new Date().getMinutes() * 60 +
          new Date().getSeconds();
        var activeclass = "n/a";
        sccalcbut.innerHTML = "Out of Session";
        if(new Date().getHours() == 3){
          sccalcbut.innerHTML = "🐱";
        }
        if((currenttime >= schedule[schedule.length-1][1] || new Date().getHours() >= 17) && thefuture == false){
          selectedschedule = "";
          var dat = new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate()+1, new Date().getHours(), new Date().getMinutes(), new Date().getSeconds());
          for (i = 0; i < specialschedules.length; i++) {
            if (
              parseInt(dat.getMonth()) ==
                parseInt(specialschedules[i].substring(2, 4)) - 1 &&
              parseInt(dat.getDate()) ==
                parseInt(specialschedules[i].substring(0, 2))
            ) {
              selectedschedule = specialschedules[i];
            }
          }

          if (selectedschedule == "") {
            selectedschedule = weekdayschedules[parseInt(dat.getDay())];
          }
          schedule = decode(selectedschedule);
          thefuture = true;
        }
        if(currenttime < schedule[2][0] && sccalcbut.innerHTML == "Out of Session"){
          if((Math.trunc((schedule[2][0] - currenttime)/60/60)+1) <= 1){
            sccalcbut.innerHTML = "Starts in " + (schedule[2][0] - currenttime)/60 + " minutes"
          } else {
            sccalcbut.innerHTML = "Starts in " + (Math.trunc((schedule[2][0] - currenttime)/60/60)+1) + " hours"
          }
        }
        sclister.innerHTML = "<b>" + schedule[0][1] + "</b><br>No Classes";
        sccalcbut.style.fontSize = "9.3vmin";
        if (schedule[2][2] != "noclass") {
          for (i = 1; i < schedule.length; i++) {
            if (currenttime >= schedule[i][0] && currenttime < schedule[i][1]) {
              activeclass = schedule[i][2];
              sccalcbut.innerHTML =
                schedule[i][2] +
                " (" +
                (schedule[i][1] - currenttime) / 60 +
                "′)";
              if (schedule[i][2].length >= 12){
                sccalcbut.style.fontSize = "6vmin";
              }
              if (
                schedule[i][3] == "1" ||
                (schedule[i][1] - currenttime) / 60 <= 5
              ) {
                var schedsave = schedule[i][2];
                //theba
                for (i2 = schedule.length - 1; i2 > 0; i2--) {
                  if (
                    currenttime < schedule[i2][0] &&
                    (schedule[i2][3] == "0" ||
                      (schedule[i][1] - currenttime) / 60 <= 5)
                  ) {
                    if (schedule[i][2].length >= 12){
                      sccalcbut.style.fontSize = "5vmin";
                    } else {
                      sccalcbut.style.fontSize = "7vmin";
                    }
                    sccalcbut.innerHTML =
                      schedsave +
                      " (" +
                      (schedule[i][1] - currenttime) / 60 +
                      "′)<br>next is " +
                      schedule[i2][2];
                    if (schedule[i][1] - currenttime <= 60) {
                      sccalcbut.innerHTML =
                        schedsave +
                        " (" +
                        (schedule[i][1] - exacttime - 1) +
                        "″)<br>next is " +
                        schedule[i2][2];
                    }
                  }
                }
              }
            }
          }
          if (
            sccalcbut.innerHTML == "Out of Session" &&
            currenttime >= schedule[1][0] &&
            currenttime < schedule[schedule.length - 1][1]
          ) {
            for (i = schedule.length - 1; i > 0; i--) {
              if (currenttime < schedule[i][0] && schedule[i][3] == "0") {
                activeclass = schedule[i][2];
                sccalcbut.style.fontSize = "7vmin";
                sccalcbut.innerHTML =
                  "transitioning to<br>" +
                  schedule[i][2] +
                  " (" +
                  (schedule[i][0] - exacttime - 1) +
                  "″)";
              }
            }
          }
          var listtext = "<b>" + schedule[0][1] + "</b>";
          for (i = 1; i < schedule.length; i++) {
            var h1 = (schedule[i][0] / 60 / 60).toFixed() - 1;
            var m1 = schedule[i][0] / 60 - h1 * 60;
            if (m1 >= 60) {
              h1 += 1;
              m1 -= 60;
            }
            if (m1 < 10) {
              m1 = "0" + m1;
            }
            if (h1 > 12) {
              h1 -= 12;
            }
            var h2 = (schedule[i][1] / 60 / 60).toFixed() - 1;
            var m2 = schedule[i][1] / 60 - h2 * 60;
            if (m2 >= 60) {
              h2 += 1;
              m2 -= 60;
            }
            if (m2 < 10) {
              m2 = "0" + m2;
            }
            if (h2 > 12) {
              h2 -= 12;
            }
            if (activeclass == schedule[i][2]) {
              if (schedule[i][2] != "Dismissal"){
                listtext =
                listtext +
                "<br><b>↪" +
                h1 +
                ":" +
                m1 +
                " - " +
                h2 +
                ":" +
                m2 +
                " ─"+new Date((schedule[i][1]-exacttime-1) * 1000).toISOString().substr(12, 7)+"─ " +
                schedule[i][2] +
                "↩</b>";
              } else {
                listtext =
                listtext +
                "<br><b>↪" +
                h1 +
                ":" +
                m1 +
                " ─── " +
                schedule[i][2] +
                "↩</b>";
              }
            } else {
              if (schedule[i][2] != "Dismissal"){
                listtext =
                listtext +
                "<br>" +
                h1 +
                ":" +
                m1 +
                " - " +
                h2 +
                ":" +
                m2 +
                " ─── " +                                                                           
                schedule[i][2];
              } else {
                listtext =
                listtext +
                "<br>" +
                h1 +
                ":" +
                m1 +
                " ─── " +
                schedule[i][2];
              }
            }
          }
          sclister.innerHTML = listtext;
        }
        
        document.title = sccalcbut.innerHTML.split("<br>")[0];
        if(thefuture==true){
          sccalcbut.innerHTML = "Tomorrow's Schedule"
        }
        if(is_iphone){
          sccalcbut.innerHTML = "<b>" + sccalcbut.innerHTML + "</b>";
        }
        if((lastcheck+299 <= currenttime || lastday+43200000 <= new Date().getTime()) && navigator.onLine==true){
          lastcheck = new Date().getHours() * 60 * 60 + new Date().getMinutes() * 60;
          var request = makeHttpObject();
          request.open("GET", "https://salesianschedule.glitch.me/autoversion", true);
          request.send(null);
          request.onreadystatechange = function() {
            if (request.readyState == 4)
              if(activeversion!=request.responseText){
                window.location.replace(window.location);
              }
          };
        }
      }
      function refreshloop() {
        setTimeout("refreshloop()", 1000);
        calcSchedule();
      }
      refreshloop();
    </script>
  </body>
</html>